{% extends "base.html" %}

{% load static %}
{% block title %}Profil - Matana University{% endblock %}

{% block extra_css %}
<style>
    .hero-section {
        background: linear-gradient(rgba(16, 29, 56, 0.95), rgba(16, 29, 56, 0.95)),
                    url('{% static "images/campus-aerial.jpg" %}') center/cover;
        height: 60vh;
        min-height: 400px;
    }

    .section-title::after {
        content: '';
        display: block;
        width: 80px;
        height: 4px;
        background: #FFB140;
        margin: 1rem auto;
        border-radius: 2px;
    }

    .vision-card {
        background: linear-gradient(135deg, #004AAD, #003880);
        transition: transform 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .vision-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M54.627 0l.83.828-1.415 1.415L51.8 0h2.827zM5.373 0l-.83.828L5.96 2.243 8.2 0H5.374zM48.97 0l3.657 3.657-1.414 1.414L46.143 0h2.828zM11.03 0L7.372 3.657 8.787 5.07 13.857 0H11.03zm32.284 0L49.8 6.485 48.384 7.9l-7.9-7.9h2.83zM16.686 0L10.2 6.485 11.616 7.9l7.9-7.9h-2.83zM22.344 0L13.858 8.485 15.272 9.9l7.9-7.9h-.828zm5.656 0L19.515 8.485 17.343 10.657 28 0h-2.83zM32.657 0L26.172 6.485 24 8.657 34.657 0h-2zM44.97 0L34.314 10.657 32.142 12.828 42.8 2.172 44.213 0h.757zm-5.654.172L50.485 11.343 48.314 13.515 37.657 2.858 39.316.172zm-14.97 0L40.485 16.343l-2.172 2.172-9.9-9.9 1.415-1.414L33.8 3.23 29.844.172h-5.5zm-8.31.828L40.485 26.343 38.313 28.515 3.642 1z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
    }

    .vision-card:hover {
        transform: translateY(-5px);
    }

    .timeline {
        position: relative;
    }

    .timeline::before {
        content: '';
        position: absolute;
        left: 50%;
        top: 0;
        bottom: 0;
        width: 2px;
        background: #E5E7EB;
        transform: translateX(-50%);
    }

    .timeline-item {
        position: relative;
        margin-bottom: 4rem;
    }

    .timeline-item::before {
        content: '';
        position: absolute;
        left: 50%;
        top: 0;
        width: 20px;
        height: 20px;
        background: #FFB140;
        border-radius: 50%;
        transform: translateX(-50%);
    }

    .facility-card {
        overflow: hidden;
        border-radius: 1rem;
        transition: all 0.3s ease;
    }

    .facility-card:hover {
        transform: translateY(-5px);
    }

    .facility-card img {
        transition: transform 0.5s ease;
    }

    .facility-card:hover img {
        transform: scale(1.1);
    }

    .stat-card {
        position: relative;
        overflow: hidden;
    }

    .stat-card::after {
        content: '';
        position: absolute;
        width: 100px;
        height: 100px;
        background: #FFB140;
        border-radius: 50%;
        right: -20px;
        bottom: -20px;
        opacity: 0.1;
    }

    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
    }

    .floating-icon {
        animation: float 3s ease-in-out infinite;
    }

    @keyframes scroll {
        0% {
            transform: translateX(0);
        }
        100% {
            transform: translateX(calc(-320px * 5)); /* Width of card (w-80 = 320px) * number of unique cards */
        }
    }

    .facilities-track {
        animation: scroll 30s linear infinite;
    }

    .facilities-track:hover {
        animation-play-state: paused;
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section flex items-center justify-center text-white">
    <div class="container mx-auto px-4 text-center">
        <h1 class="text-4xl md:text-6xl font-bold mb-6">{{ hero.title }}</h1>
        <p class="text-xl md:text-2xl text-white/80 max-w-3xl mx-auto">{{ hero.subtitle }}</p>
    </div>
</section>

<!-- Vision & Mission -->
<section class="py-20">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl font-bold text-center mb-16 section-title">Visi & Misi</h2>
        
        <div class="grid md:grid-cols-2 gap-8 mb-16">
            <div class="vision-card p-8 rounded-2xl text-white">
                <div class="relative z-10">
                    <div class="text-2xl font-bold mb-4">{{ visi_section.title }}</div>
                    <p class="text-white/90 leading-relaxed">{{ visi_section.description }}</p>
                </div>
            </div>
            
            <div class="space-y-6">
                <div class="text-2xl font-bold mb-6">{{ misi_section.title }}</div>
                <div class="space-y-4">
                    {% for item in misi_section.items %}
                    <div class="flex items-start">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mt-1">
                            <span class="text-matana-blue font-semibold">{{ forloop.counter }}</span>
                        </div>
                        <p class="ml-4 text-gray-600">{{ item.description }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Sejarah -->
<section class="py-20 bg-gray-50">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl font-bold text-center mb-16 section-title">{{ sejarah_section.title }}</h2>
        <div class="max-w-4xl mx-auto">
            <div class="prose prose-lg mx-auto">
                <p class="text-gray-600 leading-relaxed">{{ sejarah_section.description|safe }}</p>
            </div>
        </div>
    </div>
</section>

<!-- Keunggulan -->
<section class="py-20">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl font-bold text-center mb-16 section-title">{{ keunggulan_section.title }}</h2>
        <div class="grid md:grid-cols-3 gap-8">
            {% for item in keunggulan_section.items %}
            <div class="bg-white p-8 rounded-xl shadow-sm hover:shadow-lg transition-shadow">
                <img src="{{ item.image }}" alt="{{ item.title }}" class="w-full h-48 object-cover rounded-lg mb-6">
                <h3 class="text-xl font-bold mb-4">{{ item.title }}</h3>
                <p class="text-gray-600">{{ item.description }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Facilities -->
<section class="py-20 bg-gray-50">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl font-bold text-center mb-16 section-title">Fasilitas Kampus</h2>
        
        <!-- Draggable Slider Container -->
        <div class="facility-slider select-none" x-data="facilitySlider()">
            <div class="overflow-hidden">
                <div class="flex gap-6 facility-track cursor-grab active:cursor-grabbing" 
                     x-ref="slider"
                     @mousedown="startDragging"
                     @mousemove="drag"
                     @mouseup="stopDragging"
                     @mouseleave="stopDragging"
                     @touchstart="startDragging"
                     @touchmove="drag"
                     @touchend="stopDragging">
                    
                    <!-- Facility Cards -->
                    <template x-for="(facility, index) in [...facilities, ...facilities]">
                        <div class="facility-card group relative flex-none w-[400px]">
                            <!-- Card Content -->
                            <div class="relative overflow-hidden rounded-2xl bg-white">
                                <!-- Image Container -->
                                <div class="aspect-[4/3] overflow-hidden">
                                    <img :src="facility.image" 
                                         :alt="facility.title"
                                         class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700">
                                </div>
                                
                                <!-- Content Overlay -->
                                <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                                    <div class="absolute bottom-0 left-0 right-0 p-8">
                                        <h3 class="text-2xl font-bold text-white mb-3" x-text="facility.title"></h3>
                                        <p class="text-white/90 text-lg leading-relaxed" x-text="facility.description"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
function facilitySlider() {
    return {
        facilities: {{ fasilitas|safe }},  // Use content from ContentBlock
        isDragging: false,
        startPos: 0,
        currentTranslate: 0,
        prevTranslate: 0,
        animationID: 0,
        currentIndex: 0,

        startDragging(e) {
            this.isDragging = true;
            this.startPos = this.getPositionX(e);
            this.animationID = requestAnimationFrame(this.animation.bind(this));
            this.$refs.slider.style.cursor = 'grabbing';
        },

        drag(e) {
            if (this.isDragging) {
                const currentPosition = this.getPositionX(e);
                this.currentTranslate = this.prevTranslate + currentPosition - this.startPos;
            }
        },

        stopDragging() {
            this.isDragging = false;
            cancelAnimationFrame(this.animationID);
            this.prevTranslate = this.currentTranslate;
            this.$refs.slider.style.cursor = 'grab';
        },

        animation() {
            this.setSliderPosition();
            if (this.isDragging) requestAnimationFrame(this.animation.bind(this));
        },

        setSliderPosition() {
            this.$refs.slider.style.transform = `translateX(${this.currentTranslate}px)`;
        },

        getPositionX(e) {
            return e.type.includes('mouse') ? e.pageX : e.touches[0].clientX;
        }
    }
}
</script>

<style>
.facility-slider {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.facility-track {
    transform: translateX(0);
    transition: transform 0.3s ease-out;
}

.facility-card {
    will-change: transform;
}

@media (hover: hover) and (pointer: fine) {
    .facility-card:hover {
        transform: translateY(-5px);
    }
}

/* Auto-scroll animation */
@keyframes infiniteScroll {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(calc(-400px * 5)); /* Width of card * number of unique cards */
    }
}

/* Apply auto-scroll when not being dragged */
.facility-track:not(:active) {
    animation: infiniteScroll 35s linear infinite;
}

.facility-track:hover {
    animation-play-state: paused;
}
</style>
{% endblock %} 